Roles and Galaxy
===

While it is possible to write a playbook in one very large file (and you might start out learning playbooks this way), eventually youâ€™ll want to reuse files and start to organize things.

Roles are ways of automatically loading certain vars_files, tasks, and handlers based on a known file structure. Grouping content by roles also allows easy sharing of roles with other users.

The anatomy of a role.

```
- hosts: webservers
  vars_files:
    - vars/main.yml
  roles:
    - { role: geerlingguy.apache }
```


```
$ ansible-galaxy
```

Notable Options for ansible-galaxy
---

Usage: ansible-galaxy [delete|import|info|init|install|list|login|remove|search|setup] [--help]

* init
* install
* delete
* list


Exercises
---
* What are roles?
* Initialize your first ansible role.
* Install your first ansible role.
* Why can't you install your first ansible-role?
* Look ahead at configuration(http://docs.ansible.com/ansible/intro_configuration.html) and set the role folder to a folder you have permissions to. 
* What happens when you run the playbook multiple times?
* What is that concept called?


Let's continue on our path forward. We talked about the structure of the ansible assumes and we played a fast one on you. That structure is the assumed structure for an ansible role, not a playbook. Ansible roles are well encapsulated plays. That means, if we are doing our job and abstracting our infrastructure code, we will be using re-usable roles more than we are using plays in playbooks.

* defaults
 * main.yml
* files
 * all files in this directory can automatically be found as source files. 
* handlers
 * main.yml
* meta
 * main.yml
* tasks
 * main.yml
* templates
 * all files in this directory can automatically be found as source for templates.
* vars
 * main.yml

Defaults are high level overriderable variables. Variables are lower level overridable variables. Why defaults and why vars? If we include a role, a host or group var cannot override a default.

Handlers are tasks that are executed at the end of a playbook, normally restarting services or a database migrations, etc.

Meta is data that is used as a developer to inform you about the playbook and ansible-galaxy uses it to help share and install roles on other people's machines.

Tasks are ansible tasks like we have seen before.

Files and templates are source directories for common tasks/modules that use file and templates.

